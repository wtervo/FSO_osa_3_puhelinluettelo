{"version":3,"sources":["components/Input.js","components/Filter.js","components/services/pbService.js","components/Notification.js","components/Errormessage.js","components/App.js","index.js"],"names":["Input","_ref","val","change","text","react_default","a","createElement","value","onChange","Filter","newFilter","handleFilterChange","components_Input","baseUrl","pbService","extention","axios","get","then","response","data","newObject","post","put","id","delete","Notification","message","className","Errormessage","App","_useState","useState","_useState2","Object","slicedToArray","persons","setPersons","_useState3","_useState4","newName","setNewName","_useState5","_useState6","newNumber","setNewNumber","_useState7","_useState8","setNewFilter","_useState9","_useState10","notificationMessage","setNotificationMessage","_useState11","_useState12","errorMessage","setErrorMessage","useEffect","dbPersons","components_Notification","components_Errormessage","components_Filter","event","console","log","target","onSubmit","preventDefault","nameObject","name","number","find","person","window","confirm","concat","personInfo","personname","changedInfo","objectSpread","returnedPerson","setTimeout","catch","filter","n","error","type","searchfilter","buttonHandler","map","onClick","toLowerCase","includes","ReactDOM","render","components_App","document","getElementById"],"mappings":"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","file":"static/js/main.5046f28e.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Input = ({val, change, text}) => {\r\n    return(\r\n        <div>\r\n            {text} <input \r\n                value={val}\r\n                onChange={change}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Input","import React from 'react'\r\nimport Input from \"./Input\"\r\n\r\nconst Filter = ({newFilter, handleFilterChange}) => {\r\n    return(\r\n      <form>\r\n        <Input val={newFilter} change={handleFilterChange} text={\"Filter \"}/>\r\n      </form>\r\n    )\r\n}\r\n\r\nexport default Filter","import axios from 'axios'\r\n\r\nconst baseUrl = \"/api/persons/\"\r\n\r\nconst getAll = (extention) => {\r\n    const request = axios.get(baseUrl + extention)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst replace = newObject => {\r\n    const request = axios.put(baseUrl + newObject.id, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst remove = id => {\r\n    const request = axios.delete(baseUrl + id)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nexport default {getAll, create, replace, remove}","import React from \"react\"\r\n\r\nconst Notification = ({message}) => {\r\n    if (message === null) {\r\n      return null\r\n    }\r\n  \r\n    return (\r\n      <div className=\"notification\">\r\n        {message}\r\n      </div>\r\n    )\r\n}\r\n\r\nexport default Notification","import React from \"react\"\r\n\r\nconst Errormessage = ({message}) => {\r\n    if (message === null) {\r\n        return null\r\n    }\r\n    \r\n    return (\r\n        <div className=\"error\">\r\n            {message}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Errormessage","import React, {useState, useEffect} from 'react'\r\nimport \"./../index.css\"\r\nimport Input from \"./Input\"\r\nimport Filter from \"./Filter\"\r\n//import Display from \"./Display\"\r\nimport pbService from \"./services/pbService\"\r\nimport Notification from \"./Notification\"\r\nimport Errormessage from \"./Errormessage\"\r\n\r\n\r\n\r\nconst App = () => {\r\n \r\n  const [persons, setPersons] = useState([])\r\n  const [newName, setNewName] = useState(\"\")\r\n  const [newNumber, setNewNumber] = useState(\"\")\r\n  const [newFilter, setNewFilter] = useState(\"\")\r\n  const [notificationMessage, setNotificationMessage] = useState(null)\r\n  const [errorMessage, setErrorMessage] = useState(null)\r\n\r\n  //originally had Display component in its separate file, but this arrangement did not\r\n  //work with the deletion hooks and at this point I do not know any other way to fix it\r\n  \r\n  const Display = ({persons, searchfilter}) => {\r\n    \r\n    const buttonHandler = person => {\r\n      const personname = person.name\r\n      \r\n      if (window.confirm(`Do you want to remove ${person.name} from the phonebook?`)) {\r\n        pbService\r\n          .remove(person.id)\r\n            .then(() => {\r\n              console.log(`${personname} removed from the phonebook`)\r\n              setNotificationMessage(`${personname} removed from the phonebook`)\r\n              setNewName(\"  \")\r\n              setNewName(\"\")\r\n              setTimeout(() => {\r\n                setNotificationMessage(null)\r\n              }, 3000)\r\n            })\r\n            .catch(() => {\r\n              setErrorMessage(`\"${personname}\" was already removed from the phonebook`)\r\n              setPersons(persons.filter(n => n.id !== person.id))\r\n              setNewName(\"  \")\r\n              setNewName(\"\")\r\n              setTimeout(() => {\r\n                setErrorMessage(null)\r\n              }, 3000)\r\n            })\r\n      }\r\n    }\r\n  \r\n    if (searchfilter === '') {\r\n      const new_arr = persons.map(person => <p>{person.name} {person.number} <button onClick={\r\n          () => buttonHandler(person)\r\n        }>remove</button> </p>)\r\n      return new_arr\r\n    }\r\n  \r\n    else{\r\n      const filterlist = persons.filter(person => person.name.toLowerCase().includes(searchfilter.toLowerCase()))\r\n      const new_arr = filterlist.map(person => <p>{person.name} {person.number} <button onClick={\r\n          () => buttonHandler(person)\r\n        }>remove</button> </p>)\r\n      return new_arr\r\n    }\r\n  }\r\n\r\n  const hook = () => {\r\n    pbService\r\n      .getAll(\"\")\r\n        .then(dbPersons => {\r\n          setPersons(dbPersons)\r\n      })\r\n  }\r\n\r\n  useEffect(hook, [newName]) //improvements for the future: render just once after name has been\r\n  //deleted (after button press) instead of continuously observing changes in the server data\r\n\r\n  const addName = (event) => {\r\n    event.preventDefault()\r\n    const nameObject = {\r\n      name: newName,\r\n      number: newNumber\r\n    }\r\n\r\n    if (persons.find(person => person.name === newName)) {\r\n      if (window.confirm(`\"${newName}\" is already in the phonebook. Do you wish to replace the number with a new one?`)) {\r\n        const personInfo = persons.find(person => person.name === newName)\r\n        const personname = personInfo.name\r\n        const changedInfo = {...personInfo, number: newNumber}\r\n        pbService\r\n        .replace(changedInfo)\r\n          .then(returnedPerson => {\r\n            console.log(returnedPerson)\r\n            setNewName(\"\")\r\n            setNewNumber(\"\")\r\n            setNotificationMessage(`Number changed for \"${returnedPerson.name}\"`)\r\n            setTimeout(() => {\r\n              setNotificationMessage(null)\r\n            }, 3000)\r\n          })\r\n          .catch(() => {\r\n            setErrorMessage(`\"${personname}\" was already removed from the phonebook`)\r\n            setPersons(persons.filter(n => n.id !== personInfo.id))\r\n            setNewName(\"  \")\r\n            setNewName(\"\")\r\n            setTimeout(() => {\r\n              setErrorMessage(null)\r\n            }, 5000)\r\n          })\r\n      }\r\n    }\r\n\r\n    else{\r\n      pbService\r\n        .create(nameObject)\r\n          .then(returnedPerson => {\r\n            console.log(returnedPerson)\r\n            setPersons(persons.concat(returnedPerson))\r\n            setNewName(\"\")\r\n            setNewNumber(\"\")\r\n            setNotificationMessage(`\"${returnedPerson.name}\" has been added to the phonebook`)\r\n            setTimeout(() => {\r\n              setNotificationMessage(null)\r\n            }, 3000)\r\n          })\r\n          .catch(error => {\r\n            console.log(error.response.data)\r\n            setNewName(\"\")\r\n            setNewNumber(\"\")\r\n            setErrorMessage(`${error.response.data.error}`)\r\n            setTimeout(() => {\r\n              setErrorMessage(null)\r\n            }, 5000)\r\n          })\r\n    }\r\n  }\r\n\r\n\r\n  const handleNameChange = (event) => {\r\n    console.log(event.target.value)\r\n    setNewName(event.target.value)\r\n  }\r\n\r\n  const handleNumberChange = (event) => {\r\n    console.log(event.target.value)\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n  const handleFilterChange = (event) => {\r\n    console.log(event.target.value)\r\n    setNewFilter(event.target.value)\r\n  }\r\n  return (\r\n    <div>\r\n      <Notification message={notificationMessage}/>\r\n      <Errormessage message={errorMessage} />\r\n      <h2>Phonebook</h2>\r\n      <Filter newFilter={newFilter} handleFilterChange={handleFilterChange}/>\r\n      <h3>Add new contact</h3>\r\n      <form onSubmit={addName}>\r\n        <Input val={newName} change={handleNameChange} text={\"Name: \"}/>\r\n        <Input val={newNumber} change={handleNumberChange} text={\"Number :\"}/>\r\n        <div>\r\n          <button type=\"submit\">Add</button>\r\n        </div>\r\n      </form>\r\n      <h3>Numbers</h3>\r\n      <Display persons={persons} searchfilter={newFilter}/>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './components/App.js'\n\nReactDOM.render(<App />, \ndocument.getElementById('root')\n)"],"sourceRoot":""}